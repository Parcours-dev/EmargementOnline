"use strict";(self.webpackChunkdigitalisation_emargement_frontend=self.webpackChunkdigitalisation_emargement_frontend||[]).push([[201],{1201:(S,s,n)=>{n.r(s),n.d(s,{AccueilComponent:()=>h});var e=n(8457),d=n(7028),m=n(7136),u=n(1626);class p{URL_EXPRESS="https://emargementonline-production.up.railway.app/api";LOGIN="login"}let g=(()=>{class o{API_CONSTANTES=new p;httpClient=(0,e.WQX)(u.Qq);connecterUtilisateur(r){return this.httpClient.post(`${this.API_CONSTANTES.URL_EXPRESS}/${this.API_CONSTANTES.LOGIN}`,r)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var C=n(177),i=n(4341),E=n(3242),l=n(7147);let h=(()=>{class o{CHAMP_EMAIL="email";CHAMP_MDP="password";ROLE_PROFESSEUR="professeur";ROLE_ETUDIANT="etudiant";ROLE_CFA="cfa";retourLogin=function v(o={}){return{token:void 0,role:void 0,nom:void 0,prenom:void 0,...o}}();serviceLogin=(0,e.WQX)(g);formBuilder=(0,e.WQX)(i.ok);router=(0,e.WQX)(E.Ix);formulaireConnexionUtilisateur=this.formBuilder.group({email:[""],password:[""]});get emailControl(){return this.formulaireConnexionUtilisateur.get(this.CHAMP_EMAIL)}get motDePasseControl(){return this.formulaireConnexionUtilisateur.get(this.CHAMP_MDP)}connecterUtilisateur(){const r=function c(o={}){return{email:void 0,mot_de_passe:void 0,...o}}({email:this.emailControl.value,mot_de_passe:this.motDePasseControl.value});this.serviceLogin.connecterUtilisateur(r).subscribe({next:t=>{localStorage.setItem("_TOKEN_UTILISATEUR",JSON.stringify({token:t.token})),localStorage.setItem("_INFOS_UTILISATEUR",JSON.stringify(t)),this.gererCasSucces(t)},error:t=>{console.error("Erreur de connexion :",t)}})}gererCasSucces(r){const t=localStorage.getItem("_SCAN_TOKEN");if(t)return localStorage.removeItem("_SCAN_TOKEN"),void this.router.navigateByUrl(`/scan/${t}`);r.role==this.ROLE_ETUDIANT&&this.router.navigateByUrl(`${l.gN}`),r.role==this.ROLE_CFA&&this.router.navigateByUrl(`${l.Gy}`),r.role==this.ROLE_PROFESSEUR&&this.router.navigateByUrl(`${l.Cy}`)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=e.VBU({type:o,selectors:[["app-accueil"]],decls:32,vars:3,consts:[[1,"grayed-background"],[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"blue-block"],[1,"content-inside","text-center"],["data-bs-toggle","modal","data-bs-target","#loginModal",1,"btn","btn-blue"],["id","loginModal","tabindex","-1","aria-labelledby","loginModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","loginModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-container"],["action","#","method","get","novalidate","",3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Entrez votre adresse mail",1,"form-control",3,"formControl"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Entrez votre mot de passe",1,"form-control",3,"formControl"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-blue","w-100",3,"click"]],template:function(t,a){1&t&&(e.nrm(0,"app-header"),e.j41(1,"main",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),e.EFF(6,"Bienvenue sur le site de l'\xe9margement en ligne"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Cliquez pour vous identifiez"),e.k0s(),e.j41(9,"button",4),e.EFF(10,"Identiez-vous"),e.k0s()()()(),e.j41(11,"div",5)(12,"div",6)(13,"div",7)(14,"div",8)(15,"h5",9),e.EFF(16,"Connexion"),e.k0s(),e.nrm(17,"button",10),e.k0s(),e.j41(18,"div",11)(19,"div",12)(20,"form",13)(21,"div",14)(22,"label",15),e.EFF(23,"Email Utilisateurr"),e.k0s(),e.nrm(24,"input",16),e.k0s(),e.j41(25,"div",14)(26,"label",17),e.EFF(27,"Mot de passe"),e.k0s(),e.nrm(28,"input",18),e.k0s(),e.j41(29,"button",19),e.bIt("click",function(){return a.connecterUtilisateur()}),e.EFF(30,"Se connecter"),e.k0s()()()()()()()(),e.nrm(31,"app-footer")),2&t&&(e.R7$(20),e.Y8G("formGroup",a.formulaireConnexionUtilisateur),e.R7$(4),e.Y8G("formControl",a.emailControl),e.R7$(4),e.Y8G("formControl",a.motDePasseControl))},dependencies:[d.l,m.n,C.MD,i.X1,i.qT,i.me,i.BC,i.cb,i.l_,i.j4],encapsulation:2})}return o})()}}]);