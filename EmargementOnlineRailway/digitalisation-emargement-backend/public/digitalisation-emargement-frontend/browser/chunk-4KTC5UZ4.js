import{b as h,c as _,d as P,g as U,h as F,i as x,n as I,p as O}from"./chunk-KZQKWR6U.js";import{a as L,b as S,c as y,d as R,e as A}from"./chunk-5GFQN4PI.js";import{A as g,Ea as b,H as p,K as i,L as r,M as m,Q as v,W as n,a,l as f,o as l,ua as C,wa as E,x as d}from"./chunk-NEFVD2IN.js";function N(o={}){return a(a({},{email:void 0,mot_de_passe:void 0}),o)}var D={production:!1,apiUrl:"http://localhost:3000/api"};var B=D.apiUrl,u=class{URL_EXPRESS=B;LOGIN="login"};var c=class o{API_CONSTANTES=new u;httpClient=l(E);connecterUtilisateur(t){let e=`${this.API_CONSTANTES.URL_EXPRESS}/${this.API_CONSTANTES.LOGIN}`;return this.httpClient.post(e,t)}static \u0275fac=function(e){return new(e||o)};static \u0275prov=f({token:o,factory:o.\u0275fac,providedIn:"root"})};function T(o={}){return a(a({},{token:void 0,role:void 0,nom:void 0,prenom:void 0}),o)}var M=class o{CHAMP_EMAIL="email";CHAMP_MDP="password";ROLE_PROFESSEUR="professeur";ROLE_ETUDIANT="etudiant";ROLE_CFA="cfa";retourLogin=T();serviceLogin=l(c);formBuilder=l(I);router=l(b);formulaireConnexionUtilisateur=this.formBuilder.group({email:[""],password:[""]});get emailControl(){return this.formulaireConnexionUtilisateur.get(this.CHAMP_EMAIL)}get motDePasseControl(){return this.formulaireConnexionUtilisateur.get(this.CHAMP_MDP)}connecterUtilisateur(){let t=N({email:this.emailControl.value,mot_de_passe:this.motDePasseControl.value});this.serviceLogin.connecterUtilisateur(t).subscribe({next:e=>{localStorage.setItem("_TOKEN_UTILISATEUR",JSON.stringify({token:e.token})),localStorage.setItem("_INFOS_UTILISATEUR",JSON.stringify(e)),this.gererCasSucces(e)},error:e=>{console.error("Erreur de connexion :",e)}})}gererCasSucces(t){t.role==this.ROLE_ETUDIANT&&this.router.navigateByUrl(`${L}`),t.role==this.ROLE_CFA&&this.router.navigateByUrl(`${S}`),t.role==this.ROLE_PROFESSEUR&&this.router.navigateByUrl(`${y}`)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=g({type:o,selectors:[["app-accueil"]],decls:32,vars:3,consts:[[1,"grayed-background"],[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"blue-block"],[1,"content-inside","text-center"],["data-bs-toggle","modal","data-bs-target","#loginModal",1,"btn","btn-blue"],["id","loginModal","tabindex","-1","aria-labelledby","loginModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","loginModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-container"],["action","#","method","get","novalidate","",3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","Entrez votre adresse mail",1,"form-control",3,"formControl"],["for","password",1,"form-label"],["type","password","id","password","placeholder","Entrez votre mot de passe",1,"form-control",3,"formControl"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-blue","w-100",3,"click"]],template:function(e,s){e&1&&(m(0,"app-header"),i(1,"main",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),n(6,"Bienvenue sur le site de l'\xE9margement en ligne"),r(),i(7,"p"),n(8,"Cliquez pour vous identifiez"),r(),i(9,"button",4),n(10,"Identiez-vous"),r()()()(),i(11,"div",5)(12,"div",6)(13,"div",7)(14,"div",8)(15,"h5",9),n(16,"Connexion"),r(),m(17,"button",10),r(),i(18,"div",11)(19,"div",12)(20,"form",13)(21,"div",14)(22,"label",15),n(23,"Email Utilisateurr"),r(),m(24,"input",16),r(),i(25,"div",14)(26,"label",17),n(27,"Mot de passe"),r(),m(28,"input",18),r(),i(29,"button",19),v("click",function(){return s.connecterUtilisateur()}),n(30,"Se connecter"),r()()()()()()()(),m(31,"app-footer")),e&2&&(d(20),p("formGroup",s.formulaireConnexionUtilisateur),d(4),p("formControl",s.emailControl),d(4),p("formControl",s.motDePasseControl))},dependencies:[R,A,C,O,U,h,_,P,F,x],encapsulation:2})};export{M as AccueilComponent};
