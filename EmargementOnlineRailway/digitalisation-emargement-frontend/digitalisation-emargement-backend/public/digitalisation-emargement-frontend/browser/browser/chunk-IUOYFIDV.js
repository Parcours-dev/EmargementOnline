import{b as V,c as A,d as k,e as N,f as W,g as G,j as L,k as U,l as q,m as H,o as j}from"./chunk-KZQKWR6U.js";import{d as B,e as O}from"./chunk-5GFQN4PI.js";import{$ as _,A as D,E as b,H as E,K as n,L as i,M as P,P as x,Q as h,R as l,W as o,X as f,Y as w,_ as c,a as S,aa as g,b as y,o as M,q as s,r as u,ra as v,sa as T,ua as F,va as C,wa as I,x as d}from"./chunk-NEFVD2IN.js";function J(p,m){if(p&1){let e=x();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),i(),n(9,"td")(10,"button",21),h("click",function(){let t=s(e).$implicit,r=l(2);return u(r.remplirForm(t))}),o(11,"\u270F\uFE0F Modifier"),i(),n(12,"button",22),h("click",function(){let t=s(e).$implicit,r=l(2);return u(r.supprimerPromotion(t.id_promotion))}),o(13,"\u{1F5D1}\uFE0F Supprimer"),i()()()}if(p&2){let e=m.$implicit;d(2),f(e.id_promotion),d(2),f(e.nom),d(2),f(e.debut_annee_scolaire),d(2),f(e.fin_annee_scolaire)}}function K(p,m){if(p&1){let e=x();n(0,"div",8)(1,"h4",9),o(2,"\u{1F4C4} Liste des Promotions"),i(),n(3,"table",10)(4,"thead")(5,"tr")(6,"th"),o(7,"ID"),i(),n(8,"th"),o(9,"Nom"),i(),n(10,"th"),o(11,"Ann\xE9e d\xE9but"),i(),n(12,"th"),o(13,"Ann\xE9e fin"),i(),n(14,"th"),o(15,"Actions"),i()()(),n(16,"tbody"),b(17,J,14,4,"tr",11),i()(),n(18,"form",12,0),h("ngSubmit",function(){s(e);let t=l();return u(t.soumettreForm())}),n(20,"h5"),o(21),i(),n(22,"input",13),g("ngModelChange",function(t){s(e);let r=l();return _(r.formPromo.id_promotion,t)||(r.formPromo.id_promotion=t),u(t)}),i(),n(23,"div",14)(24,"div",15)(25,"label",16),o(26,"Nom"),i(),n(27,"input",17),g("ngModelChange",function(t){s(e);let r=l();return _(r.formPromo.nom,t)||(r.formPromo.nom=t),u(t)}),i()(),n(28,"div",15)(29,"label",16),o(30,"Ann\xE9e d\xE9but"),i(),n(31,"input",18),g("ngModelChange",function(t){s(e);let r=l();return _(r.formPromo.debut_annee_scolaire,t)||(r.formPromo.debut_annee_scolaire=t),u(t)}),i()(),n(32,"div",15)(33,"label",16),o(34,"Ann\xE9e fin"),i(),n(35,"input",19),g("ngModelChange",function(t){s(e);let r=l();return _(r.formPromo.fin_annee_scolaire,t)||(r.formPromo.fin_annee_scolaire=t),u(t)}),i()()(),n(36,"button",20),o(37,"\u{1F4C4} Enregistrer"),i()()()}if(p&2){let e=l();d(17),E("ngForOf",e.promotions),d(4),w("",e.promoEnEdition?"\u270F\uFE0F Modifier":"\u2795 Ajouter"," une Promotion"),d(),c("ngModel",e.formPromo.id_promotion),d(5),c("ngModel",e.formPromo.nom),d(4),c("ngModel",e.formPromo.debut_annee_scolaire),d(4),c("ngModel",e.formPromo.fin_annee_scolaire)}}function $(p,m){if(p&1){let e=x();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td")(8,"button",21),h("click",function(){let t=s(e).$implicit,r=l(2);return u(r.remplirFormGroupe(t))}),o(9,"\u270F\uFE0F Modifier"),i(),n(10,"button",22),h("click",function(){let t=s(e).$implicit,r=l(2);return u(r.supprimerGroupe(t.id_groupe))}),o(11,"\u{1F5D1}\uFE0F Supprimer"),i()()()}if(p&2){let e=m.$implicit,a=l(2);d(2),f(e.id_groupe),d(2),f(e.nom),d(2),f(a.getNomPromotion(e.id_promotion))}}function Y(p,m){if(p&1&&(n(0,"option",26),o(1),i()),p&2){let e=m.$implicit;E("value",e.id_promotion),d(),w(" ",e.nom," ")}}function Q(p,m){if(p&1){let e=x();n(0,"div",8)(1,"h4",9),o(2,"\u{1F465} Liste des Groupes"),i(),n(3,"table",10)(4,"thead")(5,"tr")(6,"th"),o(7,"ID"),i(),n(8,"th"),o(9,"Nom"),i(),n(10,"th"),o(11,"Promotion"),i(),n(12,"th"),o(13,"Actions"),i()()(),n(14,"tbody"),b(15,$,12,3,"tr",11),i()(),n(16,"form",12,1),h("ngSubmit",function(){s(e);let t=l();return u(t.soumettreFormGroupe())}),n(18,"h5"),o(19),i(),n(20,"input",13),g("ngModelChange",function(t){s(e);let r=l();return _(r.formGroupe.id_groupe,t)||(r.formGroupe.id_groupe=t),u(t)}),i(),n(21,"div",14)(22,"div",23)(23,"label",16),o(24,"Nom"),i(),n(25,"input",17),g("ngModelChange",function(t){s(e);let r=l();return _(r.formGroupe.nom,t)||(r.formGroupe.nom=t),u(t)}),i()(),n(26,"div",23)(27,"label",16),o(28,"Promotion li\xE9e"),i(),n(29,"select",24),g("ngModelChange",function(t){s(e);let r=l();return _(r.formGroupe.id_promotion,t)||(r.formGroupe.id_promotion=t),u(t)}),b(30,Y,2,2,"option",25),i()()(),n(31,"button",20),o(32,"\u{1F4BE} Enregistrer"),i()()()}if(p&2){let e=l();d(15),E("ngForOf",e.groupes),d(4),w("",e.groupeEnEdition?"\u270F\uFE0F Modifier":"\u2795 Ajouter"," un Groupe"),d(),c("ngModel",e.formGroupe.id_groupe),d(5),c("ngModel",e.formGroupe.nom),d(4),c("ngModel",e.formGroupe.id_promotion),d(),E("ngForOf",e.promotions)}}function X(p,m){if(p&1){let e=x();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),i(),n(9,"td"),o(10),i(),n(11,"td"),o(12),i(),n(13,"td")(14,"button",21),h("click",function(){let t=s(e).$implicit,r=l(2);return u(r.remplirFormEtudiant(t))}),o(15,"\u270F\uFE0F"),i(),n(16,"button",22),h("click",function(){let t=s(e).$implicit,r=l(2);return u(r.supprimerEtudiant(t.NEtudiant))}),o(17,"\u{1F5D1}\uFE0F"),i()()()}if(p&2){let e=m.$implicit;d(2),f(e.NEtudiant),d(2),f(e.nom),d(2),f(e.prenom),d(2),f(e.email),d(2),f(e.id_groupe_TD),d(2),f(e.id_groupe_Anglais)}}function Z(p,m){if(p&1){let e=x();n(0,"div",8)(1,"h4",9),o(2,"\u{1F9D1}\u200D\u{1F393} Liste des \xC9tudiants"),i(),n(3,"table",10)(4,"thead")(5,"tr")(6,"th"),o(7,"NEtudiant"),i(),n(8,"th"),o(9,"Nom"),i(),n(10,"th"),o(11,"Pr\xE9nom"),i(),n(12,"th"),o(13,"Email"),i(),n(14,"th"),o(15,"TD"),i(),n(16,"th"),o(17,"Anglais"),i(),n(18,"th"),o(19,"Actions"),i()()(),n(20,"tbody"),b(21,X,18,6,"tr",11),i()(),n(22,"form",12,2),h("ngSubmit",function(){s(e);let t=l();return u(t.soumettreFormEtudiant())}),n(24,"h5"),o(25),i(),n(26,"div",14)(27,"div",15)(28,"label",16),o(29,"NEtudiant"),i(),n(30,"input",27),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.NEtudiant,t)||(r.formEtudiant.NEtudiant=t),u(t)}),i()(),n(31,"div",15)(32,"label",16),o(33,"Nom"),i(),n(34,"input",17),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.nom,t)||(r.formEtudiant.nom=t),u(t)}),i()(),n(35,"div",15)(36,"label",16),o(37,"Pr\xE9nom"),i(),n(38,"input",28),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.prenom,t)||(r.formEtudiant.prenom=t),u(t)}),i()(),n(39,"div",23)(40,"label",16),o(41,"Email"),i(),n(42,"input",29),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.email,t)||(r.formEtudiant.email=t),u(t)}),i()(),n(43,"div",23)(44,"label",16),o(45,"Mot de passe"),i(),n(46,"input",30),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.mot_de_passe,t)||(r.formEtudiant.mot_de_passe=t),u(t)}),i()(),n(47,"div",23)(48,"label",16),o(49,"Groupe TD"),i(),n(50,"input",31),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.id_groupe_TD,t)||(r.formEtudiant.id_groupe_TD=t),u(t)}),i()(),n(51,"div",23)(52,"label",16),o(53,"Groupe Anglais"),i(),n(54,"input",32),g("ngModelChange",function(t){s(e);let r=l();return _(r.formEtudiant.id_groupe_Anglais,t)||(r.formEtudiant.id_groupe_Anglais=t),u(t)}),i()()(),n(55,"button",20),o(56,"\u{1F4BE} Enregistrer"),i()()()}if(p&2){let e=l();d(21),E("ngForOf",e.etudiants),d(4),w("",e.etudiantEnEdition?"\u270F\uFE0F Modifier":"\u2795 Ajouter"," un \xC9tudiant"),d(5),c("ngModel",e.formEtudiant.NEtudiant),E("readonly",e.etudiantEnEdition),d(4),c("ngModel",e.formEtudiant.nom),d(4),c("ngModel",e.formEtudiant.prenom),d(4),c("ngModel",e.formEtudiant.email),d(4),c("ngModel",e.formEtudiant.mot_de_passe),d(4),c("ngModel",e.formEtudiant.id_groupe_TD),d(4),c("ngModel",e.formEtudiant.id_groupe_Anglais)}}var z=class p{API="http://localhost:3000/api";http=M(I);activePanel=null;promotions=[];promoEnEdition=!1;formPromo={id_promotion:null,nom:"",debut_annee_scolaire:"",fin_annee_scolaire:""};groupes=[];groupeEnEdition=!1;formGroupe={id_groupe:null,nom:"",id_promotion:""};etudiants=[];etudiantEnEdition=!1;formEtudiant={NEtudiant:"",nom:"",prenom:"",email:"",mot_de_passe:"",id_groupe_TD:"",id_groupe_Anglais:""};ngOnInit(){if(typeof window<"u"){let m=localStorage.getItem("_TOKEN_UTILISATEUR");if(m){let e=JSON.parse(m),a=new C().set("Authorization",`Bearer ${e.token}`);this.chargerPromotions(a),this.chargerGroupes(a),this.chargerEtudiants(a)}}}togglePanel(m){this.activePanel=this.activePanel===m?null:m}chargerPromotions(m){this.http.get(`${this.API}/cfa/promotions`,{headers:m}).subscribe({next:e=>this.promotions=e,error:()=>console.error("\u274C Erreur chargement promotions")})}remplirForm(m){this.formPromo=S({},m),this.promoEnEdition=!0}soumettreForm(){if(typeof window<"u"){let m=JSON.parse(localStorage.getItem("_TOKEN_UTILISATEUR")),e=new C().set("Authorization",`Bearer ${m.token}`).set("Content-Type","application/json"),a=this.formPromo.id_promotion?"PUT":"POST",t=this.formPromo.id_promotion?`${this.API}/cfa/promotions/${this.formPromo.id_promotion}`:`${this.API}/cfa/promotions`;this.http.request(a,t,{body:this.formPromo,headers:e}).subscribe({next:()=>{this.chargerPromotions(e),this.resetFormPromo()},error:()=>console.error("\u274C Erreur enregistrement promotion")})}}supprimerPromotion(m){if(confirm("Supprimer cette promotion ?")&&typeof window<"u"){let e=JSON.parse(localStorage.getItem("_TOKEN_UTILISATEUR")),a=new C().set("Authorization",`Bearer ${e.token}`);this.http.delete(`${this.API}/cfa/promotions/${m}`,{headers:a}).subscribe({next:()=>this.chargerPromotions(a),error:()=>console.error("\u274C Erreur suppression promotion")})}}resetFormPromo(){this.formPromo={id_promotion:null,nom:"",debut_annee_scolaire:"",fin_annee_scolaire:""},this.promoEnEdition=!1}chargerGroupes(m){this.http.get(`${this.API}/cfa/groupes`,{headers:m}).subscribe({next:e=>this.groupes=e,error:()=>console.error("\u274C Erreur chargement groupes")})}remplirFormGroupe(m){this.formGroupe=S({},m),this.groupeEnEdition=!0}soumettreFormGroupe(){if(typeof window<"u"){let m=JSON.parse(localStorage.getItem("_TOKEN_UTILISATEUR")),e=new C().set("Authorization",`Bearer ${m.token}`).set("Content-Type","application/json"),a=this.formGroupe.id_groupe?"PUT":"POST",t=this.formGroupe.id_groupe?`${this.API}/cfa/groupes/${this.formGroupe.id_groupe}`:`${this.API}/cfa/groupes`;this.http.request(a,t,{body:{nom:this.formGroupe.nom,id_promotion:this.formGroupe.id_promotion},headers:e}).subscribe({next:()=>{this.chargerGroupes(e),this.resetFormGroupe()},error:()=>console.error("\u274C Erreur enregistrement groupe")})}}supprimerGroupe(m){if(confirm("Supprimer ce groupe ?")&&typeof window<"u"){let a=JSON.parse(localStorage.getItem("_TOKEN_UTILISATEUR")),t=new C().set("Authorization",`Bearer ${a.token}`);this.http.delete(`${this.API}/cfa/groupes/${m}`,{headers:t}).subscribe({next:()=>this.chargerGroupes(t),error:()=>console.error("\u274C Erreur suppression groupe")})}}resetFormGroupe(){this.formGroupe={id_groupe:null,nom:"",id_promotion:""},this.groupeEnEdition=!1}getNomPromotion(m){let e=this.promotions.find(a=>a.id_promotion===m);return e?e.nom:"?"}chargerEtudiants(m){this.http.get(`${this.API}/cfa/etudiants`,{headers:m}).subscribe({next:e=>this.etudiants=e,error:()=>console.error("\u274C Erreur chargement \xE9tudiants")})}remplirFormEtudiant(m){this.formEtudiant=y(S({},m),{mot_de_passe:""}),this.etudiantEnEdition=!0}soumettreFormEtudiant(){let m=JSON.parse(localStorage.getItem("_TOKEN_UTILISATEUR")),e=new C().set("Authorization",`Bearer ${m.token}`).set("Content-Type","application/json"),a=!!this.formEtudiant.NEtudiant&&this.etudiantEnEdition,t=a?`${this.API}/cfa/etudiants/${this.formEtudiant.NEtudiant}`:`${this.API}/cfa/etudiants`,r=a?"PUT":"POST",R=S({},this.formEtudiant);this.http.request(r,t,{body:R,headers:e}).subscribe({next:()=>{this.chargerEtudiants(e),this.resetFormEtudiant()},error:()=>console.error("\u274C Erreur enregistrement \xE9tudiant")})}supprimerEtudiant(m){if(!confirm("Supprimer cet \xE9tudiant ?"))return;let a=JSON.parse(localStorage.getItem("_TOKEN_UTILISATEUR")),t=new C().set("Authorization",`Bearer ${a.token}`);this.http.delete(`${this.API}/cfa/etudiants/${m}`,{headers:t}).subscribe({next:()=>this.chargerEtudiants(t),error:()=>console.error("\u274C Erreur suppression \xE9tudiant")})}resetFormEtudiant(){this.formEtudiant={NEtudiant:"",nom:"",prenom:"",email:"",mot_de_passe:"",id_groupe_TD:"",id_groupe_Anglais:""},this.etudiantEnEdition=!1}static \u0275fac=function(e){return new(e||p)};static \u0275cmp=D({type:p,selectors:[["app-dashboard-cfa"]],decls:14,vars:3,consts:[["promoForm","ngForm"],["groupeForm","ngForm"],["etuForm","ngForm"],[1,"grayed-background","main-content"],[1,"container"],[1,"d-flex","flex-wrap","gap-3","justify-content-center","mb-4"],[1,"btn","btn-toggle",3,"click"],["class","accordion-panel card p-4 mb-4",4,"ngIf"],[1,"accordion-panel","card","p-4","mb-4"],[1,"mb-3"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"mt-4",3,"ngSubmit"],["type","hidden","name","id",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],["name","nom","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","debut","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","fin","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success","mt-3"],[1,"btn","btn-sm","btn-outline-primary","me-2",3,"click"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"col-md-6"],["name","promotion","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","netu","required","",1,"form-control",3,"ngModelChange","ngModel","readonly"],["name","prenom","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","mdp",1,"form-control",3,"ngModelChange","ngModel"],["name","groupeTD","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","groupeAnglais","required","",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,a){e&1&&(P(0,"app-header"),n(1,"main",3)(2,"div",4)(3,"div",5)(4,"button",6),h("click",function(){return a.togglePanel("promotions")}),o(5," \u{1F393} G\xE9rer les Promotions "),i(),n(6,"button",6),h("click",function(){return a.togglePanel("groupes")}),o(7," \u{1F465} G\xE9rer les Groupes de TD "),i(),n(8,"button",6),h("click",function(){return a.togglePanel("etudiants")}),o(9," \u{1F9D1}\u200D\u{1F3EB} G\xE9rer les \xC9tudiants "),i()(),b(10,K,38,6,"div",7)(11,Q,33,6,"div",7)(12,Z,57,10,"div",7),i()(),P(13,"app-footer")),e&2&&(d(10),E("ngIf",a.activePanel==="promotions"),d(),E("ngIf",a.activePanel==="groupes"),d(),E("ngIf",a.activePanel==="etudiants"))},dependencies:[B,O,F,v,T,j,G,U,q,V,L,A,k,H,W,N],styles:[".btn-toggle[_ngcontent-%COMP%]{background-color:#036;color:#fff;padding:10px 18px;border-radius:12px;border:none;font-weight:700;transition:all .2s ease}.btn-toggle[_ngcontent-%COMP%]:hover{background-color:#0055a5}.accordion-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out;border-radius:16px;background:#fff;box-shadow:0 4px 10px #00000008;padding:2rem}.accordion-panel[_ngcontent-%COMP%] + .accordion-panel[_ngcontent-%COMP%]{margin-top:2rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.table[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px #0000000d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;text-align:left}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px;vertical-align:middle}form[_ngcontent-%COMP%]{background-color:#fafafa;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #0000000a;margin-top:2rem}form[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-weight:600}input.form-control[_ngcontent-%COMP%], select.form-select[_ngcontent-%COMP%]{border-radius:10px;padding:8px 12px;font-size:.95rem}button[type=submit][_ngcontent-%COMP%]{font-weight:600;padding:10px 20px;border-radius:10px;transition:background-color .2s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#28a745!important;color:#fff}@media (max-width: 768px){.accordion-panel[_ngcontent-%COMP%]{padding:1rem}.btn-toggle[_ngcontent-%COMP%]{width:100%;text-align:center}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px}}"]})};export{z as DashBoardCfaComponent};
